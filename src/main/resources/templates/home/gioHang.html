<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{/shared/layout :: layout(~{::title}, ~{::section})}">
<head>
    <title>Gi·ªè h√†ng</title>
</head>
<body>
<section>
    <div class="container py-4">
        <h3 class="mb-4">üõí Gi·ªè h√†ng</h3>
        <div class="row">
            <!-- B·∫£ng gi·ªè h√†ng -->
            <div class="col-lg-8">
                <div class="table-responsive bg-white shadow-sm rounded">
                    <table class="table align-middle mb-0 fs-5">
                        <thead class="table-light">
                        <tr>
                            <th style="width:50px;"></th>
                            <th>S·∫£n ph·∫©m</th>
                            <th>Gi√°</th>
                            <th style="width:170px;">S·ªë l∆∞·ª£ng</th>
                            <th>T·∫°m t√≠nh</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- L·∫∑p qua danh s√°ch s·∫£n ph·∫©m -->
                        <tr th:each="item, itemStat : ${items}">
                            <!-- N√∫t x√≥a -->
                            <td>
                                <a th:href="@{'/gio-hang/remove/' + ${item.sanPham.maSP}}"
                                   class="btn btn-outline-danger btn-lg"
                                   title="X√≥a s·∫£n ph·∫©m">‚úñ</a>
                            </td>

                            <!-- Th√¥ng tin s·∫£n ph·∫©m -->
                            <td>
                                <div class="d-flex align-items-center">
                                    <img th:src="${item.sanPham.imgUrl}" width="80" class="me-3 rounded">
                                    <a th:href="@{'/SanPham/chi-tiet/' + ${item.sanPham.maSP}}"
                                       class="text-decoration-none"
                                       th:text="${item.sanPham.tenSP}">T√™n s·∫£n ph·∫©m</a>
                                </div>
                            </td>

                            <!-- Gi√° -->
                            <td th:text="${#numbers.formatDecimal(item.sanPham.donGiaBan, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></td>

                            <!-- C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng -->
                            <td>
                                <div class="d-flex justify-content-center align-items-center">
                                    <!-- Gi·∫£m -->
                                    <form th:action="@{'/gio-hang/update/' + ${item.sanPham.maSP}}" method="post" class="d-inline">
                                        <input type="hidden" name="soLuong"
                                               th:value="${item.soLuong > 1 ? item.soLuong - 1 : 1}">
                                        <button type="submit" class="btn btn-outline-secondary btn-lg"
                                                th:disabled="${item.soLuong == 1}">‚àí</button>
                                    </form>

                                    <!-- Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng -->
                                    <span class="mx-3 fs-5" th:text="${item.soLuong}">1</span>

                                    <!-- TƒÉng -->
                                    <form th:action="@{'/gio-hang/update/' + ${item.sanPham.maSP}}" method="post" class="d-inline">
                                        <input type="hidden" name="soLuong" th:value="${item.soLuong + 1}">
                                        <button type="submit" class="btn btn-outline-secondary btn-lg">+</button>
                                    </form>
                                </div>
                            </td>

                            <!-- T·∫°m t√≠nh -->
                            <td th:text="${#numbers.formatDecimal(tamTinhs[itemStat.index], 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></td>


                        </tr>

                        <!-- N·∫øu gi·ªè h√†ng tr·ªëng -->
                        <tr th:if="${#lists.isEmpty(items)}">
                            <td colspan="5" class="text-center text-muted py-5">
                                Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng üò¢
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- T·ªïng ti·ªÅn -->
            <div class="col-lg-4 mt-4 mt-lg-0">
                <div class="card shadow-sm fs-5">
                    <div class="card-body">
                        <h5 class="card-title fs-4">T√≥m t·∫Øt ƒë∆°n h√†ng</h5>
                        <ul class="list-group list-group-flush mb-3">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>T·∫°m t√≠nh</span>
                                <strong th:text="${#numbers.formatDecimal(total, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</strong>
                            </li>
                            <li class="list-group-item">
                                <span>V·∫≠n chuy·ªÉn</span>
                                <p class="mb-0 small text-muted">
                                    Mi·ªÖn ph√≠ giao h√†ng<br>
                                    C√°c t√πy ch·ªçn v·∫≠n chuy·ªÉn s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t trong qu√° tr√¨nh thanh to√°n.
                                </p>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>T·ªïng c·ªông</span>
                                <strong th:text="${#numbers.formatDecimal(total, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</strong>
                            </li>
                        </ul>
                        <div class="mt-3 text-end">
                            <a th:href="@{/don-hang}" class="btn btn-primary mt-3">Ti·∫øn h√†nh thanh to√°n</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</body>
</html>
